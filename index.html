---
layout: null
---
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="A very important question.">
<meta name="theme-color" content="#e91e63">
<title>Will you be my Valentine?</title>
<style>
/*
 * If you're reading this, you're probably the kind of person
 * who reads source code on a first date. I respect that.
 *
 * ...the answer is still yes, by the way.
 */

*, *::before, *::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  --pink: #e91e63;
  --pink-hover: #c2185b;
  --card-bg: rgba(255, 255, 255, 0.92);
  --text: #4a1942;
  --text-muted: #8e6585;
}

html, body {
  height: 100%;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  background: linear-gradient(to bottom, #fff0f3 0%, #fce4ec 25%, #f8bbd0 55%, #f48fb1 80%, #ec407a 100%);
  background-attachment: fixed;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  color: var(--text);
}

/* â”€â”€ Floating background emojis â”€â”€ */

.bg-floaters {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 0;
}

.bg-floaters .floater {
  position: absolute;
  opacity: 0.18;
  animation: floatUp linear infinite;
}

@keyframes floatUp {
  0%   { transform: translateY(110vh) rotate(0deg) scale(1); opacity: 0; }
  10%  { opacity: 0.2; }
  50%  { opacity: 0.28; }
  90%  { opacity: 0.15; }
  100% { transform: translateY(-10vh) rotate(360deg) scale(1.1); opacity: 0; }
}

@media (prefers-reduced-motion: reduce) {
  .bg-floaters .floater {
    animation: none !important;
    display: none;
  }
  #noBtn {
    transition: none !important;
  }
}

/* â”€â”€ Card â”€â”€ */

#card {
  position: relative;
  z-index: 1;
  background: var(--card-bg);
  border-radius: 22px;
  box-shadow: 0 8px 40px rgba(233, 30, 99, 0.15), 0 2px 8px rgba(0, 0, 0, 0.06);
  padding: 32px 28px 28px;
  max-width: 560px;
  width: 92vw;
  text-align: center;
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
  overflow: hidden;
}

#messageTitle {
  font-size: clamp(26px, 6vw, 40px);
  font-weight: 700;
  margin-bottom: 8px;
  line-height: 1.25;
}

#messageBody {
  font-size: clamp(15px, 3.5vw, 18px);
  color: var(--text-muted);
  margin-bottom: 24px;
  line-height: 1.4;
}

/* â”€â”€ Arena (button playground) â”€â”€ */

#arena {
  position: relative;
  width: 100%;
  height: 150px;
  margin-bottom: 8px;
}

@media (min-width: 520px) {
  #arena { height: 140px; }
}

/* â”€â”€ Buttons â€” liquid glass â”€â”€ */

button {
  font-family: inherit;
  font-size: 17px;
  font-weight: 600;
  border: none;
  border-radius: 18px;
  cursor: pointer;
  min-height: 48px;
  padding: 12px 24px;
  -webkit-tap-highlight-color: transparent;
  touch-action: manipulation;
  position: relative;
  overflow: hidden;
}

.glass-btn {
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1.5px solid rgba(255, 255, 255, 0.45);
  box-shadow:
    0 4px 24px rgba(0, 0, 0, 0.08),
    0 1px 3px rgba(0, 0, 0, 0.06),
    inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -1px 2px rgba(0, 0, 0, 0.04);
  transition: transform 0.15s ease, box-shadow 0.2s ease, background 0.2s ease;
}

.glass-btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 50%;
  background: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.5) 0%,
    rgba(255, 255, 255, 0.15) 60%,
    transparent 100%
  );
  border-radius: 18px 18px 50% 50%;
  pointer-events: none;
}

#yesBtn {
  background: linear-gradient(135deg, rgba(233, 30, 99, 0.75), rgba(194, 24, 91, 0.8));
  color: #fff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
  min-width: 180px;
  width: 60%;
  max-width: 240px;
  position: absolute;
  left: 50%;
  top: 12px;
  transform: translateX(-50%);
  z-index: 2;
  font-size: 18px;
  letter-spacing: 0.3px;
}

#yesBtn:hover {
  background: linear-gradient(135deg, rgba(233, 30, 99, 0.88), rgba(194, 24, 91, 0.92));
  transform: translateX(-50%) scale(1.05);
  box-shadow:
    0 6px 32px rgba(233, 30, 99, 0.3),
    0 2px 6px rgba(0, 0, 0, 0.08),
    inset 0 1px 1px rgba(255, 255, 255, 0.6),
    inset 0 -1px 2px rgba(0, 0, 0, 0.04);
}

#yesBtn:active {
  transform: translateX(-50%) scale(0.97);
}

#noBtn {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.55), rgba(240, 240, 245, 0.45));
  color: #555;
  min-width: 120px;
  padding: 10px 20px;
  position: absolute;
  left: 0;
  top: 0;
  z-index: 3;
  transition: transform 0.06s ease-out;
  user-select: none;
  -webkit-user-select: none;
  font-size: 16px;
}

#noBtn:hover {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.7), rgba(240, 240, 245, 0.6));
  box-shadow:
    0 6px 28px rgba(0, 0, 0, 0.1),
    0 2px 6px rgba(0, 0, 0, 0.06),
    inset 0 1px 1px rgba(255, 255, 255, 0.7),
    inset 0 -1px 2px rgba(0, 0, 0, 0.04);
}

/* â”€â”€ Hint and taunt text â”€â”€ */

#hintText {
  font-size: 13px;
  color: var(--text-muted);
  margin-top: 10px;
  opacity: 0.7;
}

#tauntText {
  font-size: 14px;
  color: var(--pink);
  margin-top: 6px;
  min-height: 22px;
  font-weight: 500;
}

/* â”€â”€ State overlays (shared) â”€â”€ */

.state-overlay {
  display: none;
  position: absolute;
  inset: -40px;
  background: #fff;
  z-index: 50;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  animation: fadeScale 0.4s ease-out;
}

.state-overlay.show {
  display: flex;
}

@keyframes fadeScale {
  0%   { opacity: 0; transform: scale(0.85); }
  100% { opacity: 1; transform: scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  @keyframes fadeScale {
    0%   { opacity: 0; }
    100% { opacity: 1; }
  }
}

/* â”€â”€ Success state â”€â”€ */

#successTitle {
  font-size: clamp(24px, 5.5vw, 36px);
  font-weight: 700;
  margin-bottom: 8px;
}

#successBody {
  font-size: clamp(15px, 3.5vw, 18px);
  color: var(--text-muted);
  margin-bottom: 20px;
}

#successGroundhog {
  max-width: 200px;
  width: 60%;
  border-radius: 14px;
  margin-top: 12px;
  margin-bottom: 8px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

#startOver {
  background: none;
  border: none;
  color: var(--pink);
  font-size: 14px;
  cursor: pointer;
  text-decoration: underline;
  min-height: auto;
  padding: 4px 8px;
}

/* â”€â”€ Rejection state â”€â”€ */

#rejectEmoji {
  font-size: 64px;
  margin-bottom: 12px;
  animation: heartBreak 0.6s ease-out;
}

@keyframes heartBreak {
  0%  { transform: scale(1); }
  30% { transform: scale(1.3); }
  50% { transform: scale(0.9); }
  100% { transform: scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  @keyframes heartBreak {
    0%, 100% { transform: scale(1); }
  }
}

#rejectTitle {
  font-size: clamp(22px, 5vw, 32px);
  font-weight: 700;
  color: var(--text);
  margin-bottom: 8px;
}

#rejectBody {
  font-size: clamp(14px, 3.5vw, 17px);
  color: var(--text-muted);
  margin-bottom: 20px;
  line-height: 1.4;
}

#repairBtn {
  background: var(--pink);
  color: #fff;
  font-size: 16px;
  font-weight: 600;
  padding: 12px 28px;
  border-radius: 14px;
  border: none;
  cursor: pointer;
  min-height: 46px;
  font-family: inherit;
  transition: background 0.2s, transform 0.1s;
}

#repairBtn:hover { background: var(--pink-hover); transform: scale(1.04); }
#repairBtn:active { transform: scale(0.97); }

/* â”€â”€ Fake error dialog â”€â”€ */

#fakeError {
  display: none;
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.8);
  z-index: 200;
  background: #fff;
  border-radius: 12px;
  box-shadow: 0 8px 40px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.08);
  width: 340px;
  max-width: 90vw;
  overflow: hidden;
  opacity: 0;
  font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
}

#fakeError.show {
  display: block;
  animation: errorPop 0.35s ease-out forwards;
}

@keyframes errorPop {
  0%  { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
  60% { transform: translate(-50%, -50%) scale(1.03); }
  100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
}

@media (prefers-reduced-motion: reduce) {
  @keyframes errorPop {
    0%   { opacity: 0; transform: translate(-50%, -50%) scale(1); }
    100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
  }
}

.error-titlebar {
  background: #d32f2f;
  color: #fff;
  padding: 10px 16px;
  font-size: 14px;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 8px;
}

.error-body {
  padding: 24px 20px 16px;
  display: flex;
  align-items: flex-start;
  gap: 14px;
}

.error-warn-icon {
  font-size: 32px;
  flex-shrink: 0;
  line-height: 1;
}

.error-text {
  font-size: 14px;
  color: #222;
  line-height: 1.5;
}

.error-text strong {
  display: block;
  font-size: 15px;
  margin-bottom: 4px;
}

.error-actions {
  padding: 8px 20px 18px;
  text-align: right;
}

#fakeErrorOk {
  background: #d32f2f;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 8px 32px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  min-height: 36px;
  font-family: inherit;
}

#fakeErrorOk:hover {
  background: #b71c1c;
}

/* â”€â”€ Confetti canvas â”€â”€ */

#confettiCanvas {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 100;
}

/* â”€â”€ Screen reader only â”€â”€ */

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
}
</style>
</head>
<body>

<div class="bg-floaters" id="bgFloaters" aria-hidden="true"></div>

<main id="card">
  <h1 id="messageTitle">Will you be my Valentine? ğŸ’Œ</h1>
  <p id="messageBody">I promise snacks, cuddles, and good vibes.</p>

  <div id="arena" role="group" aria-label="Response buttons">
    <button id="yesBtn" class="glass-btn">Yes ğŸ’˜</button>
    <button id="noBtn" class="glass-btn" tabindex="-1" aria-hidden="true">No ğŸ™ƒ</button>
  </div>

  <p id="tauntText" aria-live="polite"></p>
  <p id="hintText">(Try clicking Noâ€¦ if you can ğŸ˜Œ)</p>

  <div id="successOverlay" class="state-overlay" role="alert">
    <div id="successTitle">YAY! It's a date ğŸ˜ŒğŸ’</div>
    <p id="successBody">Text me what time works?</p>
    <img id="successGroundhog" src="groundhog.png" alt="Excited groundhog" loading="lazy">
    <button id="startOver">Start over</button>
  </div>

  <div id="rejectOverlay" class="state-overlay">
    <div id="rejectEmoji" aria-hidden="true">ğŸ’”ğŸ˜­</div>
    <div id="rejectTitle">You broke my heart...</div>
    <p id="rejectBody">This wasn't supposed to happen. There's still time to fix this.</p>
    <button id="repairBtn">Repair broken heart ğŸ©¹ğŸ’—</button>
  </div>

  <div id="statusText" class="sr-only" aria-live="polite" role="status"></div>
</main>

<canvas id="confettiCanvas" aria-hidden="true"></canvas>

<div id="fakeError" role="dialog" aria-labelledby="fakeErrorTitle">
  <div class="error-titlebar">
    <span aria-hidden="true">âš ï¸</span>
    <span id="fakeErrorTitle">System Error</span>
  </div>
  <div class="error-body">
    <span class="error-warn-icon" aria-hidden="true">ğŸš¨</span>
    <div class="error-text">
      <strong>Critical Warning</strong>
      p.s. i love you
    </div>
  </div>
  <div class="error-actions">
    <button id="fakeErrorOk">I love you too ğŸ’•</button>
  </div>
</div>

<script>
/**
 * Valentine Yes/No â€” a very serious application.
 *
 * Architecture notes for the curious:
 * - No button uses proximity-based evasion (Euclidean distance)
 * - Mobile uses full touch event chain interception
 * - Collision detection prevents No from overlapping Yes
 * - If you're reading this... just click Yes already.
 */
(function() {
  'use strict';

  /* â”€â”€ Configuration â”€â”€ */

  var CONFIG = {
    noTaunts: [
      '', '',
      'Are you sure? ğŸ¥º',
      'Think again... ğŸ’­',
      'Really?? ğŸ˜¢',
      'Please?? ğŸ¥¹',
      'I\'ll be sad ğŸ˜­',
      'You\'re breaking my heart ğŸ’”',
      'Be serious ğŸ˜­',
      'PLEASE ğŸ™',
      'I won\'t give up ğŸ˜¤',
      'Last chance... ğŸ‘‰ğŸ‘ˆ'
    ],
    padding: 12,
    maxRetries: 20,
    proximityThreshold: 80,
    errorDelay: 3000
  };

  /* â”€â”€ URL personalization (?to=Name) â”€â”€ */

  var params = new URLSearchParams(window.location.search);
  var recipient = params.get('to');
  if (recipient) {
    var safeName = recipient.replace(/[<>"'&]/g, '');
    document.getElementById('messageTitle').textContent =
      safeName + ', will you be my Valentine? ğŸ’Œ';
  }

  /* â”€â”€ DOM references â”€â”€ */

  var $ = function(id) { return document.getElementById(id); };

  var arena         = $('arena');
  var yesBtn        = $('yesBtn');
  var noBtn         = $('noBtn');
  var tauntText     = $('tauntText');
  var successOverlay = $('successOverlay');
  var rejectOverlay = $('rejectOverlay');
  var statusText    = $('statusText');
  var canvas        = $('confettiCanvas');
  var startOverBtn  = $('startOver');
  var repairBtn     = $('repairBtn');
  var fakeError     = $('fakeError');
  var fakeErrorOk   = $('fakeErrorOk');

  /* â”€â”€ State â”€â”€ */

  var dodgeCount = 0;
  var noX = 0;
  var noY = 0;
  var errorTimer = null;
  var reducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  /* â”€â”€ Easter egg â”€â”€ */

  console.log(
    '%cğŸ’Œ Hey, you found the console! %c\n\n' +
    'Since you\'re here, I\'ll let you in on a secret:\n' +
    'The No button uses Euclidean distance collision avoidance.\n' +
    'Pretty fancy for a love letter, right?\n\n' +
    'P.S. The answer should definitely be Yes.\n' +
    'P.P.S. Try: document.getElementById(\'rejectOverlay\').classList.add(\'show\')\n' +
    '...but you didn\'t hear that from me. ğŸ¤«\n',
    'color: #e91e63; font-size: 16px; font-weight: bold;',
    'color: #4a1942; font-size: 13px;'
  );

  /* â”€â”€ Background floaters â”€â”€ */

  function createFloaters() {
    if (reducedMotion) return;
    var container = $('bgFloaters');
    var emojis = [
      '\uD83D\uDC36', '\uD83D\uDC15', '\uD83D\uDC29',       // dogs
      '\uD83D\uDC31', '\uD83D\uDC08',                         // cats
      '\uD83D\uDC95', '\uD83D\uDC97', '\uD83D\uDC96', 'â¤ï¸', '\uD83D\uDC98', 'â™¥', // hearts
      '\uD83E\uDD16',                                          // robot
      '\uD83D\uDC39', '\uD83E\uDDAB'                           // small critters
    ];
    for (var i = 0; i < 20; i++) {
      var el = document.createElement('span');
      el.className = 'floater';
      el.textContent = emojis[Math.floor(Math.random() * emojis.length)];
      el.style.left = (Math.random() * 100) + '%';
      el.style.fontSize = (18 + Math.random() * 22) + 'px';
      el.style.animationDuration = (7 + Math.random() * 10) + 's';
      el.style.animationDelay = (Math.random() * 12) + 's';
      container.appendChild(el);
    }
  }

  /* â”€â”€ Geometry helpers â”€â”€ */

  function rectsOverlap(ax, ay, aw, ah, bx, by, bw, bh) {
    return ax < bx + bw && ax + aw > bx && ay < by + bh && ay + ah > by;
  }

  function getYesRect() {
    var ar = arena.getBoundingClientRect();
    var yr = yesBtn.getBoundingClientRect();
    return { x: yr.left - ar.left, y: yr.top - ar.top, w: yr.width, h: yr.height };
  }

  function getSafePositions(noW, noH) {
    var pad = CONFIG.padding;
    var aW = arena.offsetWidth;
    var aH = arena.offsetHeight;
    var mx = aW - noW - pad;
    var my = aH - noH - pad;
    var cx = (aW - noW) / 2;
    var cy = (aH - noH) / 2;
    return [
      { x: pad, y: pad }, { x: mx, y: pad },
      { x: pad, y: my },  { x: mx, y: my },
      { x: cx, y: pad },  { x: cx, y: my },
      { x: pad, y: cy },  { x: mx, y: cy }
    ];
  }

  /* â”€â”€ No button movement â”€â”€ */

  function moveNo() {
    dodgeCount++;
    var pad = CONFIG.padding;
    var aW = arena.offsetWidth;
    var aH = arena.offsetHeight;
    var noW = noBtn.offsetWidth;
    var noH = noBtn.offsetHeight;
    var yes = getYesRect();

    var x, y, found = false;

    for (var i = 0; i < CONFIG.maxRetries; i++) {
      x = pad + Math.random() * (aW - noW - pad * 2);
      y = pad + Math.random() * (aH - noH - pad * 2);
      if (!rectsOverlap(x, y, noW, noH, yes.x, yes.y, yes.w, yes.h)) {
        found = true;
        break;
      }
    }

    if (!found) {
      var positions = getSafePositions(noW, noH);
      for (var j = 0; j < positions.length; j++) {
        var p = positions[j];
        if (!rectsOverlap(p.x, p.y, noW, noH, yes.x, yes.y, yes.w, yes.h)) {
          x = p.x;
          y = p.y;
          found = true;
          break;
        }
      }
    }

    if (!found) {
      x = pad;
      y = aH - noH - pad;
    }

    noX = x;
    noY = y;
    noBtn.style.transform = 'translate(' + x + 'px, ' + y + 'px)';

    var tauntIndex = Math.min(dodgeCount, CONFIG.noTaunts.length - 1);
    tauntText.textContent = CONFIG.noTaunts[tauntIndex];
  }

  function placeNoCenter() {
    var aW = arena.offsetWidth;
    var aH = arena.offsetHeight;
    var noW = noBtn.offsetWidth;
    var noH = noBtn.offsetHeight;
    noX = (aW - noW) / 2;
    noY = aH - noH - CONFIG.padding;
    noBtn.style.transform = 'translate(' + noX + 'px, ' + noY + 'px)';
  }

  /* â”€â”€ Event listeners â”€â”€ */

  // Desktop: proximity-based dodge
  arena.addEventListener('mousemove', function(e) {
    var rect = arena.getBoundingClientRect();
    var mx = e.clientX - rect.left;
    var my = e.clientY - rect.top;
    var cx = noX + noBtn.offsetWidth / 2;
    var cy = noY + noBtn.offsetHeight / 2;
    var dist = Math.sqrt((mx - cx) * (mx - cx) + (my - cy) * (my - cy));

    if (dist < CONFIG.proximityThreshold) {
      moveNo();
    }
  });

  // Mobile: intercept entire touch lifecycle and briefly disable pointer events
  var lastDodgeTime = 0;

  function dodgeAndGuard() {
    moveNo();
    lastDodgeTime = Date.now();
    // Briefly disable pointer-events so queued taps can't land
    noBtn.style.pointerEvents = 'none';
    setTimeout(function() {
      noBtn.style.pointerEvents = '';
    }, 300);
  }

  var touchEvents = ['touchstart', 'touchend', 'touchmove'];
  touchEvents.forEach(function(evt) {
    noBtn.addEventListener(evt, function(e) {
      e.preventDefault();
      e.stopImmediatePropagation();
      if (evt === 'touchstart') dodgeAndGuard();
    }, { passive: false });
  });

  // Pointer events for touch/pen devices
  noBtn.addEventListener('pointerdown', function(e) {
    if (e.pointerType !== 'mouse') {
      e.preventDefault();
      e.stopImmediatePropagation();
      dodgeAndGuard();
    }
  });

  noBtn.addEventListener('pointerup', function(e) {
    if (e.pointerType !== 'mouse') {
      e.preventDefault();
      e.stopImmediatePropagation();
    }
  });

  // Block keyboard access
  noBtn.addEventListener('focus', function() { noBtn.blur(); });
  noBtn.addEventListener('keydown', function(e) { e.preventDefault(); });

  // Last resort: if click fires, only allow if not recently dodged
  noBtn.addEventListener('click', function(e) {
    e.preventDefault();
    e.stopImmediatePropagation();
    // If a dodge happened in the last 400ms, this click is a ghost â€” ignore it
    if (Date.now() - lastDodgeTime < 400) return;
    showReject();
  });

  // Yes button
  yesBtn.addEventListener('click', showSuccess);

  // Repair button (rejection state)
  repairBtn.addEventListener('click', function() {
    rejectOverlay.classList.remove('show');
    resetState();
  });

  // Start over (success state)
  startOverBtn.addEventListener('click', function() {
    successOverlay.classList.remove('show');
    fakeError.classList.remove('show');
    if (errorTimer) clearTimeout(errorTimer);
    resetState();
  });

  // Dismiss fake error
  fakeErrorOk.addEventListener('click', function() {
    fakeError.classList.remove('show');
  });

  // Responsive resize
  var resizeTimer;
  window.addEventListener('resize', function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(function() {
      placeNoCenter();
      resetState();
    }, 200);
  });

  /* â”€â”€ State transitions â”€â”€ */

  function showSuccess() {
    successOverlay.classList.add('show');
    statusText.textContent = 'YAY! It\'s a date!';
    launchConfetti();
    errorTimer = setTimeout(function() {
      fakeError.classList.add('show');
    }, CONFIG.errorDelay);
  }

  function showReject() {
    rejectOverlay.classList.add('show');
    statusText.textContent = 'You broke my heart...';
  }

  function resetState() {
    dodgeCount = 0;
    tauntText.textContent = '';
    statusText.textContent = '';
    placeNoCenter();
  }

  /* â”€â”€ Confetti â”€â”€ */

  function launchConfetti() {
    if (reducedMotion) return;

    var ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    var colors = ['#e91e63', '#f44336', '#ff5722', '#ff9800', '#ffc107', '#e040fb', '#ff4081', '#f8bbd0', '#d32f2f'];
    var pieces = [];

    for (var i = 0; i < 120; i++) {
      pieces.push({
        x: canvas.width / 2 + (Math.random() - 0.5) * 200,
        y: canvas.height / 2 + (Math.random() - 0.5) * 100,
        vx: (Math.random() - 0.5) * 16,
        vy: -(Math.random() * 14 + 4),
        size: 6 + Math.random() * 8,
        color: colors[Math.floor(Math.random() * colors.length)],
        rotation: Math.random() * 360,
        spin: (Math.random() - 0.5) * 12,
        heart: Math.random() > 0.5,
        gravity: 0.25 + Math.random() * 0.15,
        opacity: 1
      });
    }

    var t0 = performance.now();
    var duration = 2200;

    function drawHeart(x, y, s) {
      var r = s / 2;
      ctx.beginPath();
      ctx.moveTo(x, y + r * 0.4);
      ctx.bezierCurveTo(x, y - r * 0.2, x - r, y - r * 0.6, x - r, y + r * 0.05);
      ctx.bezierCurveTo(x - r, y + r * 0.6, x, y + r, x, y + r * 1.1);
      ctx.bezierCurveTo(x, y + r, x + r, y + r * 0.6, x + r, y + r * 0.05);
      ctx.bezierCurveTo(x + r, y - r * 0.6, x, y - r * 0.2, x, y + r * 0.4);
      ctx.fill();
    }

    function frame(now) {
      var elapsed = now - t0;
      if (elapsed > duration) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        return;
      }

      ctx.clearRect(0, 0, canvas.width, canvas.height);
      var fadeStart = duration * 0.6;

      for (var j = 0; j < pieces.length; j++) {
        var p = pieces[j];
        p.x += p.vx;
        p.vy += p.gravity;
        p.y += p.vy;
        p.vx *= 0.985;
        p.rotation += p.spin;

        if (elapsed > fadeStart) {
          p.opacity = Math.max(0, 1 - (elapsed - fadeStart) / (duration - fadeStart));
        }

        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.rotation * Math.PI / 180);
        ctx.globalAlpha = p.opacity;
        ctx.fillStyle = p.color;

        if (p.heart) {
          drawHeart(0, 0, p.size);
        } else {
          ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size * 0.6);
        }

        ctx.restore();
      }

      requestAnimationFrame(frame);
    }

    requestAnimationFrame(frame);
  }

  /* â”€â”€ Initialize â”€â”€ */

  createFloaters();
  requestAnimationFrame(placeNoCenter);

})();
</script>
</body>
</html>
